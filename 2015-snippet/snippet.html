<div class="snippet" id="mofo-eoy-fundraiser-{{ snippet_id }}">
  <style type="text/css">
      #mofo-eoy-fundraiser-{{ snippet_id }} {
        margin: 0 auto 20px;
        font-family: "Open Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif;
      }

        #mofo-eoy-fundraiser-{{ snippet_id }} button::-moz-focus-inner {
          border: 0;
          padding: 0;
        }

        #mofo-eoy-fundraiser-{{ snippet_id }} p {
          font-size: 14px;
          line-height: 21px;
          margin: 0 5px 20px;
          display: block;
          height: auto;
          padding: 0;
          width: auto;
          color: {{ fontColor }};
        }

        #mofo-eoy-fundraiser-{{ snippet_id }} em {
          transition: background 800ms linear;
          font-style: normal;
          box-decoration-break: clone;
          margin: 0px -5px;
          padding: 2px 5px;
          font-weight: bold;
        }

        #mofo-eoy-fundraiser-{{ snippet_id }} em.active {
          background: {{ highlightColor }};
        }

        #mofo-eoy-fundraiser-{{ snippet_id }} .button {
          margin: 0 8px 0 0;
          width: 57px;
          height: 38px;
          text-align: center;
          text-decoration: none;
          word-spacing: -2px;
          color: rgb(255, 255, 255);
          font-family: "Open Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif;
          font-size: 21px;
          text-shadow: 0 1px 0 rgba(135, 136, 136, 0.53);
          background-color: rgb(151, 152, 152);
          box-sizing: border-box;
          background-image: linear-gradient(to top, rgba(0, 1, 1, 0.09) 0%, rgba(255, 255, 255, 0.09) 100%);
          float: left;
          border: 1px solid rgba(151, 152, 152, 0.9);
          border-radius: 2px;
          box-shadow: 0px 1px 0px rgba(255, 255, 255, 0.2) inset, 0px 0px 0px 1px rgba(255, 255, 255, 0.1) inset, 0px 1px 0px rgba(23, 51, 78, 0.03), 0px 0px 4px rgba(0, 57, 102, 0.2);
        }

        #mofo-eoy-fundraiser-{{ snippet_id }} .button:hover {
          cursor: pointer;
        }

        #mofo-eoy-fundraiser-{{ snippet_id }} .button-red {
          border: 1px solid rgba(230, 69, 61, 0.5);
          background-color: rgb(193, 56, 50);
          background-image: linear-gradient(to top, rgba(0, 1, 1, 0) 0%, rgba(255, 255, 255, 0) 100%);
          font-size: 20px;
          margin: 0;
          line-height: 38px;
          transition: background-color 400ms linear;
        }
        #mofo-eoy-fundraiser-{{ snippet_id }} .button-red:hover {
          background-color: rgb(160, 39, 35);
        }
        #mofo-eoy-fundraiser-{{ snippet_id }} .button-wide {
          width: 170px;
        }

        #mofo-eoy-fundraiser-{{ snippet_id }} .monthly-checkbox-container {
          overflow: hidden;
          margin: 0 0 11px;
          font-size: 12px;
        }

        #mofo-eoy-fundraiser-{{ snippet_id }} .monthly-checkbox {
          float: left;
          margin: 2px 5px 0 0;
        }

        #mofo-eoy-fundraiser-{{ snippet_id }} .monthly-checkbox-label {
          float: left;
        }

        #mofo-eoy-fundraiser-{{ snippet_id }} .button-selected {
          background: linear-gradient(rgb(75, 172, 238), rgb(2, 132, 225));
          border: 1px solid rgba(75, 172, 238, 0.9);
        }

        #mofo-eoy-fundraiser-{{ snippet_id }} .buttons-container {
          background: #E6E6E6;
          overflow: hidden;
          padding: 11px 20px 18px;
          border-radius: 4px;
        }

        #mofo-eoy-fundraiser-{{ snippet_id }} .donate-button.background-animate1 {
          animation: 1s ease 1s alternate none 2 running background-color-first-{{ snippet_id }}, 1s ease 3s alternate none infinite running background-color-infinite-{{ snippet_id }};
          background-color: #960900;
          border-color: rgba(230, 69, 61, 0.1);
          box-shadow: 0px 1px 0px rgba(255, 255, 255, 0.3) inset;
        }

        #mofo-eoy-fundraiser-{{ snippet_id }} .donate-button.background-animate2 {
          animation: 1s ease 1s alternate none infinite running background-color-first-{{ snippet_id }};
          background-color: #960900;
          border-color: rgba(230, 69, 61, 0.1);
          box-shadow: 0px 1px 0px rgba(255, 255, 255, 0.3) inset;
        }

        @keyframes background-color-first-{{ snippet_id }} {
          0% {
            background-color: #960900;
            border-color: rgba(230, 69, 61, 0.1);
            box-shadow: 0px 1px 0px rgba(255, 255, 255, 0.3) inset;
          }
          100% {
            background-color: #FF0000;
            border-color: rgba(230, 69, 61, 0.5);
            box-shadow: 0px 1px 0px rgba(255, 255, 255, 0.65) inset;
          }
        }

        @keyframes background-color-infinite-{{ snippet_id }} {
          0% {
            background-color: #960900;
          }
          100% {
            background-color: #C10000;
          }
        }

        body.background-{{ snippet_id }} {
          background: {{ backgroundColor }};
        }

        body.background-{{ snippet_id }} #launcher {
          background-color: #EAEAEA;
        }

  </style>

  <p>{{ text|safe }}</p>

  <div class="buttons-container">
    <div class="monthly-checkbox-container">
      <input id="monthly-checkbox" class="monthly-checkbox" type="checkbox"><label for="monthly-checkbox" class="monthly-checkbox-label">{{ monthlyCheckboxLabelText|safe }}</label>
    </div>
    <div class="donation-amounts">
      <button class="button button-selected" data-amount="{{ donationAmountFirst|safe }}">{{ donationAmountFirst|safe }} €</button>
      <button class="button" data-amount="{{ donationAmountSecond|safe }}">{{ donationAmountSecond|safe }} €</button>
      <button class="button" data-amount="{{ donationAmountThird|safe }}">{{ donationAmountThird|safe }} €</button>
      <button class="button" data-amount="{{ donationAmountFourth|safe }}">{{ donationAmountFourth|safe }} €</button>

      <a class="button button-red button-wide donate-button  {{ buttonAnimate }}" target="_blank" href="#">{{ donateButtonText|safe }}</a>
    </div>
  </div>

  <script type="text/javascript">
      //<![CDATA[
      (function() {
          var snippet = document.getElementById('mofo-eoy-fundraiser-{{ snippet_id }}');
          snippet.addEventListener('show_snippet', function() {
              (function () {
                document.querySelector("body").classList.add("background-{{ snippet_id }}");
                var donationURL = '{{ donationFormURL|safe }}';
                var extraParams = 'snippet_name={{ snippet_id }}';
                if (donationURL.indexOf('?') !== -1) {
                    donationURL += '&' + extraParams;
                } else {
                    donationURL += '?' + extraParams;
                }

                // Element cache :

                var btnAmounts = snippet.querySelectorAll('.donation-amounts .button');
                var btnSelected = snippet.querySelector('.donation-amounts .button-selected');
                var btnDonate = snippet.querySelector('.donate-button');
                var elHighlighted = snippet.querySelector('em');
                var amount = btnSelected.attributes['data-amount'].value;
                var monthlyCheckbox = document.querySelector('#monthly-checkbox');
                var frequency = "";

                function updateFrequency() {
                  frequency = "single";
                  if (monthlyCheckbox.checked) {
                    frequency = 'monthly';
                  }
                  updateLink();
                }
                updateFrequency();

                // View functions

                function selectAmount(element) {
                  element.classList.add('button-selected');
                  btnSelected.classList.remove('button-selected');
                  btnSelected = element;
                  amount = element.attributes['data-amount'].value;
                  updateLink();
                }

                function updateLink() {
                  btnDonate.attributes['href'].value = donationURL + '&amount=' + amount + "&frequency=" + frequency;
                }
                updateLink();

                // Event binding :

                for(var i=0; i<btnAmounts.length; i++) {
                  btnAmounts[i].addEventListener('click', function (event) {
                    if (!event.target.classList.contains('button-selected')) {
                      selectAmount(event.target);
                    }
                  });
                }
                monthlyCheckbox.addEventListener('change', updateFrequency);

                btnDonate.addEventListener('click', function (event) {
                  btnDonate.blur();
                });

                // Fade in highlight on text
                setTimeout(function() {
                  if (elHighlighted) {
                    elHighlighted.classList.add('active');
                  }
                }, 1000);

              })();

          }, false);
      })();
      //]]>
  </script>
</div>
